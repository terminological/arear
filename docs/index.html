<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geospatial Convenience Functions and a Supply Demand Catchment Area Generator • arear</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Geospatial Convenience Functions and a Supply Demand Catchment Area Generator">
<meta property="og:description" content="Geospatial function collection from the COVID-19 pandemic. The main focus of this was integrating geospatial demographic, hospital capacity and COVID data from England, Scotland, Wales and Northern Ireland, all of which were available on different sites and methods. The UK has a wide range of administrative geographic boundaries for different purposes and moving from different scales and resolutions proved necessary. As the geospatial operations are quite time consuming but don't need to be repeated the ability to cache results of geospatial transformations is useful and embedded into these functions.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">arear</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/arear.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/terminological/arear/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="arear" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#arear" class="anchor"></a>arear</h1></div>
<!-- badges: start -->

<p>This package provides a suite of geo-spatial functions that were useful during the response to the COVID-19 pandemic in the UK. It provides some curated data relevant to hospital capacity in the NHS, and demographic data for the UK at the beginning of the pandemic. Coupled with this are a range of functions to simplify the management of mapping data between different administrative geographies, at different levels of detail that were involved in COVID-19 reporting. For mapping community case data to hospital admissions data the library provides an algorithmic hospital catchment area estimation based on label propagation, the methods for which are described in detail in the paper <a href="https://bmchealthservres.biomedcentral.com/articles/10.1186/s12913-022-08127-7">“Algortihmic hospital catchment area estimation using label propagation”</a>. Many of the operations in the package involve time consuming calculations, which only generally need to be performed once, so the package incorporates a transparent filesystem caching layer to speed it all up.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>arear</code> is distributed via ‘r-universe’. <code>arear</code> has a dependency on the <code>sf</code> package which in turn requires the <code>gdal</code>, <code>geos</code> and <code>proj</code> libraries. These can be installed on MacOS and linux using the instructions below but more details is available in the <a href="https://r-spatial.github.io/sf/"><code>sf</code> package</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># in debian / ubuntu prior to 18.04 the following ppa is required for arear</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">sudo</span> add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">sudo</span> apt-get -q update</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># system library dependencies:</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">sudo</span> apt-get install -y make libcurl4-openssl-dev libssl-dev libprotobuf-dev <span class="dt">\ </span></span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="ex">protobuf-compiler</span> libgeos-dev libproj-dev libudunits2-dev libjq-dev <span class="dt">\ </span></span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="ex">libicu-dev</span> libgdal-dev gdal-bin libv8-dev</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co"># or on macOS</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="ex">brew</span> install gdal proj geos protobuf jq</span></code></pre></div>
<p>With <code>sf</code> dependencies installed you can then install the development version of <code>arear</code> from <a href="https://github.com/terminological/arear">GitHub</a> with the following commands:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"terminological/arear"</span><span class="op">)</span></pre></div>
<p>or stable releases from <code>r-universe</code> by:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># Enable repository from terminological</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  terminological <span class="op">=</span> <span class="st">'https://terminological.r-universe.dev'</span>,
  CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Download and install rmaven in R</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'arear'</span><span class="op">)</span></pre></div>
<p>This can take some time if <code>sf</code> has not already been set up.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Without this package accessing maps relevant to the UK requires knowing where to look for various shape files, and then managing the various differences between nomenclature and naming conventions. The package provides a simple interface to downloading, extracting, standardising, and caching the main UK maps. Getting and plotting a map for the UK based on the administrative code in use is made relatively simple:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://terminological.github.io/arear/index.html">arear</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>

<span class="co"># list the available maps ids:</span>
<span class="co"># arear::listStandardMaps()</span>

<span class="va">map</span> <span class="op">=</span> <span class="fu">arear</span><span class="fu">::</span><span class="fu"><a href="reference/getMap.html">getMap</a></span><span class="op">(</span><span class="st">"CTRY19"</span><span class="op">)</span>
<span class="va">nhshospitals</span> <span class="op">=</span> <span class="fu">arear</span><span class="fu">::</span><span class="va"><a href="reference/surgecapacity.html">surgecapacity</a></span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">sector</span> <span class="op">==</span> <span class="st">"NHS Sector"</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu">geom_sf</span><span class="op">(</span>data<span class="op">=</span><span class="va">map</span><span class="op">)</span><span class="op">+</span>
  <span class="fu">geom_sf</span><span class="op">(</span>data<span class="op">=</span><span class="va">nhshospitals</span>, <span class="fu">aes</span><span class="op">(</span>colour<span class="op">=</span><span class="va">tier1</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu">arear</span><span class="fu">::</span><span class="fu"><a href="reference/mapTheme.html">mapTheme</a></span><span class="op">(</span><span class="op">)</span></pre></div>
</div>
<div id="next-steps" class="section level2">
<h2 class="hasAnchor">
<a href="#next-steps" class="anchor"></a>Next steps</h2>
<p>Please check the getting-started vignette for more examples on the available functions, including the catchment area algorithm.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/terminological/arear/">https://​github.com/​terminological/​arear/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/terminological/arear/issues">https://​github.com/​terminological/​arear/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing arear</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Robert Challen <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5504-7768" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/terminological/arear/actions"><img src="https://github.com/terminological/arear/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/340773310"><img src="https://zenodo.org/badge/340773310.svg" alt="DOI"></a></li>
<li><a href="https://terminological.r-universe.dev"><img src="https://terminological.r-universe.dev/badges/arear" alt="arear status badge"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
