<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a mapping table between 2 `sf` dataframes. — getContainedIn • arear</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a mapping table between 2 `sf` dataframes. — getContainedIn"><meta name="description" content="This assumes unique keys defined in input and output shapes through column
grouping and outputs a mapping table between input and output groups. The
input is related to the output by containment. I.e. the result will be where
the input is wholly contained within the output shape"><meta property="og:description" content="This assumes unique keys defined in input and output shapes through column
grouping and outputs a mapping table between input and output groups. The
input is related to the output by containment. I.e. the result will be where
the input is wholly contained within the output shape"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">arear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/arear.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/terminological/arear/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate a mapping table between 2 `sf` dataframes.</h1>
      <small class="dont-index">Source: <a href="https://github.com/terminological/arear/blob/HEAD/R/arear.R" class="external-link"><code>R/arear.R</code></a></small>
      <div class="d-none name"><code>getContainedIn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This assumes unique keys defined in input and output shapes through column
grouping and outputs a mapping table between input and output groups. The
input is related to the output by containment. I.e. the result will be where
the input is wholly contained within the output shape</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getContainedIn</span><span class="op">(</span></span>
<span>  <span class="va">inputShape</span>,</span>
<span>  <span class="va">outputShape</span>,</span>
<span>  inputVars <span class="op">=</span> <span class="va">inputShape</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html" class="external-link">groups</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  outputVars <span class="op">=</span> <span class="va">outputShape</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html" class="external-link">groups</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-inputshape">inputShape<a class="anchor" aria-label="anchor" href="#arg-inputshape"></a></dt>
<dd><p>- a sf containing points of interest (or shapes)</p></dd>


<dt id="arg-outputshape">outputShape<a class="anchor" aria-label="anchor" href="#arg-outputshape"></a></dt>
<dd><p>- a sf containing polygons to locate the input in.</p></dd>


<dt id="arg-inputvars">inputVars<a class="anchor" aria-label="anchor" href="#arg-inputvars"></a></dt>
<dd><p>- defines the columns of the input that you want to retain
(as a dplyr::vars(...) list). This grouping should uniquely identify the
row. If not present will use the current grouping of inputShape.</p></dd>


<dt id="arg-outputvars">outputVars<a class="anchor" aria-label="anchor" href="#arg-outputvars"></a></dt>
<dd><p>- defines the columns of the output that you want to retain
(as a dplyr::vars(...) list). This grouping should uniquely identify the
row. If not present will use the current grouping of outputShape.</p></dd>


<dt id="arg-suffix">suffix<a class="anchor" aria-label="anchor" href="#arg-suffix"></a></dt>
<dd><p>- the suffix of any duplicated columns as per dplyr::inner_join()</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>- a mapping as a dataframe relating the `inputVars` columns and
`outputVars` columns</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># find the hospitals in a given area.</span></span></span>
<span class="r-in"><span><span class="va">mapping</span> <span class="op">=</span> <span class="fu">getContainedIn</span><span class="op">(</span></span></span>
<span class="r-in"><span>  inputShape <span class="op">=</span> <span class="fu">arear</span><span class="fu">::</span><span class="va"><a href="surgecapacity.html">surgecapacity</a></span>,</span></span>
<span class="r-in"><span>  outputShape <span class="op">=</span> <span class="fu">arear</span><span class="fu">::</span><span class="fu"><a href="ukcovidmap.html">ukcovidmap</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  inputVars <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">hospitalId</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  outputVars <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">code</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Spherical geometry (s2) switched off</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> caching item: ~/.cache/arear/cached-87104ae5fea70bf68227e23cc93f9b65-c0dff8cf33089ce431bf22abf3b7d4cf.rda</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> although coordinates are longitude/latitude, st_contains assumes that they are</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> planar</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

